{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {LoginPage} from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import {Component} from '@angular/core';\nimport {Storage} from '@ionic/storage';\nimport {AngularFireAuth} from 'angularfire2/auth';\nimport {AlertController, IonicPage, NavController, NavParams, ToastController} from 'ionic-angular';\nimport {User} from '../../models/user';\nimport {AppConfigProvider} from '../../providers/appconfig/appconfig';\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n  user = {} as User;\n\n  constructor(private storage: Storage, public navCtrl: NavController, public navParams: NavParams, private afAuth: AngularFireAuth, private toast: ToastController, private alertCtrl: AlertController, private appconfigProvider: AppConfigProvider) {\n    this.afAuth.authState.subscribe(user => {\n      if (user !== null) {\n        this.user.uid = user.uid;\n        this.user.email = user.email;\n      }\n    });\n  }\n\n  public async login(user: User) {\n    if (user.email && user.password) {\n      this.afAuth.auth.signInWithEmailAndPassword(user.email, user.password).then((res) => {\n          this.showAlert('Suksess', `Du er logget inn med epost ${res.email}.`);\n          this.appconfigProvider.checkAdmin();\n        }, e => {\n          this.showAlert('Error', e);\n        }\n      );\n    } else {\n      this.showAlert('Mangler info', 'Vennligst oppgi Epost og Passord.');\n    }\n  }\n\n  public resetPassword(user: User) {\n    if (user.email) {\n      this.afAuth.auth.sendPasswordResetEmail(user.email).then(() => {\n        this.showAlert('Suksess', `Vi har nå sendt deg en epost for å opprette nytt passord.`);\n      }, e => {\n        this.showAlert('Error', e);\n      });\n    } else {\n      this.showAlert('Mangler epost', `Vennligst oppgi din epost adresse.`);\n    }\n  }\n\n  public register() {\n    this.navCtrl.push('RegisterPage');\n  }\n\n  public logout() {\n    this.afAuth.auth.signOut().then(() => {\n      this.showAlert('Suksess', `Du er blitt logget ut.`);\n      this.navCtrl.pop();\n    }, (e) => {\n      this.showAlert(`Error`, `${e}`);\n    });\n  }\n\n  private showAlert(title, message) {\n    const alert = this.alertCtrl.create({\n      title: title,\n      message: message,\n      buttons: [\n        {\n          text: 'Ok',\n          handler: () => {\n            return;\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}